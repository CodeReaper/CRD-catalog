{
  "properties": {
    "spec": {
      "oneOf": [
        {
          "properties": {
            "gpus": {
              "oneOf": [
                {
                  "enum": [
                    1,
                    2,
                    4
                  ],
                  "type": "integer"
                },
                {
                  "minimum": 8,
                  "multipleOf": 8,
                  "type": "integer"
                }
              ],
              "title": "Total number of GPUs"
            },
            "gpusPerNode": {
              "minimum": 1,
              "title": "The maximum number of GPUs available per node",
              "type": "integer"
            },
            "slotsPerWorker": {
              "minimum": 1,
              "title": "The number of slots per worker used in hostfile",
              "type": "integer"
            }
          },
          "required": [
            "gpus"
          ]
        },
        {
          "properties": {
            "processingResourceType": {
              "enum": [
                "nvidia.com/gpu",
                "cpu"
              ],
              "title": "The processing resource type, e.g. 'nvidia.com/gpu' or 'cpu'",
              "type": "string"
            },
            "processingUnits": {
              "oneOf": [
                {
                  "enum": [
                    1,
                    2,
                    4
                  ],
                  "type": "integer"
                },
                {
                  "minimum": 8,
                  "multipleOf": 8,
                  "type": "integer"
                }
              ],
              "title": "Total number of processing units"
            },
            "processingUnitsPerNode": {
              "minimum": 1,
              "title": "The maximum number of processing units available per node",
              "type": "integer"
            },
            "slotsPerWorker": {
              "minimum": 1,
              "title": "The number of slots per worker used in hostfile",
              "type": "integer"
            }
          },
          "required": [
            "processingUnits"
          ]
        },
        {
          "properties": {
            "processingResourceType": {
              "enum": [
                "nvidia.com/gpu",
                "cpu"
              ],
              "title": "The processing resource type, e.g. 'nvidia.com/gpu' or 'cpu'",
              "type": "string"
            },
            "replicas": {
              "minimum": 1,
              "title": "Total number of replicas",
              "type": "integer"
            },
            "slotsPerWorker": {
              "minimum": 1,
              "title": "The number of slots per worker used in hostfile",
              "type": "integer"
            }
          },
          "required": [
            "replicas"
          ]
        }
      ],
      "title": "The MPIJob spec"
    }
  }
}
